SetInputFolder IN/
SetOutputFolder OUT/

ReadFiles /*.hpp
PrintLines

IgnoreSideSpaces
RemoveLastEmptyLines 0 $
AddEmptyLines $ 1

FindLines% 0 $
    `#ifndef __\@Upper%InputBaseName\_HPP__`
    `#define __\@Upper%InputBaseName\_HPP__`
FindLines~% 0 $
    `#ifndef __\@Upper%InputBaseName\__`
    `#define __\@Upper%InputBaseName\__`
CopyLines^ buffer [ ]
Set^ buffer = `\@Upper%buffer\`
PasteLines^ buffer ]

Print! `Found :`
Print^ buffer
Print^ `\%buffer\`

Call! TestExpressions
Call! TestIntegers 456
Call! TestLists
Call! TestLoops 10

PrintLines

Exit

##

:TestExpressions

Print! 1 + 2 * 3
Assert! 1 + 2 * 3 == 7

Print! 2 * 3 + 1
Assert! 2 * 3 + 1 == 7

Print! ( 1 + 2 ) * 3
Assert! ( 1 + 2 ) * 3 == 9

Return

##

:TestIntegers

Set! value = 123
Set! value += %0
Print! value

Return

##

:TestLists

Set! file_name_list = ``
Set file_name_list .= `\%InputName\`

Print! file_name_list

Return

##

:TestLoops

Set! index = 0

:loop
Set! index += 1
Print! index
Go! loop index < %0

FindText% 0 $
    #
PrintRanges
ReplaceText [ ]
    #
    @

PrintLines

Return

