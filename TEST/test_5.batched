Call! TestFunctions

SetInputFolder IN/
SetOutputFolder OUT/

ReadFiles /*.hpp
PrintLines

IgnoreSideSpaces
RemoveLastEmptyLines 0 $
AddEmptyLines $ 1

FindLines% 0 $
    `#ifndef __\@UpperCase%InputBaseName\_HPP__`
    `#define __\@UpperCase%InputBaseName\_HPP__`
FindLines~% 0 $
    `#ifndef __\@UpperCase%InputBaseName\__`
    `#define __\@UpperCase%InputBaseName\__`
CopyLines^ buffer [ ]
Set^ buffer = `\@UpperCase%buffer\`
PasteLines^ buffer ]

Print! `Found :`
Print^ buffer
Print^ `\%buffer\`

Call! TestExpressions
Call! TestIntegers 456
Call! TestLists
Call! TestLoops 10
Call! TestFunctions

PrintLines

Exit

##

:TestExpressions

Print! 1 + 2 * 3
Assert! 1 + 2 * 3 == 7

Print! 2 * 3 + 1
Assert! 2 * 3 + 1 == 7

Print! ( 1 + 2 ) * 3
Assert! ( 1 + 2 ) * 3 == 9

Return

##

:TestIntegers

Set! value = 123
Set! value += %0
Print! value

Return

##

:TestLists

Set! file_name_list = ``
Set file_name_list .= `\%InputName\`

Print! file_name_list

Return

##

:TestLoops

Set! index = 0

:loop
Set! index += 1
Print! index
Go! loop index < %0

FindText% 0 $
    #
PrintRanges
ReplaceText [ ]
    #
    @

PrintLines

Return

##

:TestFunctions

Set! value = `***` ~ MajorCase `test` ~ `***`
Print! value
Assert! value == `***Test***`

Set! value = `***` ~ MajorCase ( LowerCase `TEST` ) ~ `***`
Print! value
Assert! value == `***Test***`

Set! value = `***` ~ Twice `test` ~ `***`
Print! value
Assert! value == `***testtest***`

Set! value = `***` ~ Twice ( Twice `test` ) ~ `***`
Print! value
Assert! value == `***testtesttesttest***`

Set! test = `TEST`
Set! value = `***\@Twice@Twice@MajorCase@LowerCase$test\***`
Print! value
Assert! value == `***TestTestTestTest***`

Return

##

:Twice

Return %0 ~ %0
